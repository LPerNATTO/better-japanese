# BetterJapanese
Steam版CookieClickerの日本語訳を非公式のものに置き換えるMod

## 開発 / 翻訳
このリポジトリをローカルにcloneし、`npm install`してください。  
開発または翻訳を行う際は`npm start`することで`dist`ディレクトリが生成され、変更を行う度に自動的に最新の成果物が出力されます。  
**「その他」→「シンボリックリンクを張る」を参考に、シンボリックリンクを張ると色々と楽になるかもしれません**

### 開発
開発を行う際は`src`ディレクトリ内のソースコードを書き換えてください。  

### 翻訳
`locales`ディレクトリ内にある`<言語名>.json5`を編集することで、翻訳を編集できます。  
**開発者モードを有効にすると翻訳作業をサポートする機能が有効になります。**  
詳しくは「その他」→「開発者モードについて」をご覧ください。

## リリース
新しいバージョンをリリースする際は`package.json`の`version`プロパティを編集してください。

## その他
### 開発者モードについて
開発者モードを有効にすると、以下の機能が有効になります。

- ローカルの翻訳ファイルの読み込み (`translate.json`)
- 翻訳ファイルの再読み込みボタン
  
以下のいずれかの方法で開発者モードを有効にすることが出来ます。

- CookieClicker本体の開発者モードをONにする  
CookieClicker本体の開発者モードをONにすると、BetterJapaneseの開発者モードもONになります。  
`<CookieClickerがインストールされているディレクトリ>/resources/app/start.js`の12行目にある`let DEV=0`を`let DEV=1`に変更することで有効に出来ます。

- `main.js`を編集する  
`main.js`の`isDev`フラグ (`betterJapanese.isDev`) を`true`に書き換えると開発者モードを有効にできます。

### 挙動について
原則、一部の箇所については翻訳の適用後にページを再読み込みしないと反映されない箇所があります。（施設名など）  
翻訳ファイルを編集しても反映されない場合は再読み込みしてみてください。

### シンボリックリンクを張る
- まず `npm start` してから`dist`ディレクトリが作成されたことを確認します。
- 管理者権限でコマンドプロンプトを開いて `mklink /d "<CookieClickerのローカルModのディレクトリ>/better-japanese" "<このディレクトリ>/dist"` をするといい感じになります。
  
シンボリックリンクを正しく張れていれば、2回目以降はこの操作をする必要はありません。  

## 謝辞
このModを作成するにあたり、以下のWebサイトを参考にさせて頂きました。  
この場をお借りして感謝申し上げます。  

- [Cookie Clicker 日本語Wiki](https://w.atwiki.jp/cookieclickerjpn/)
- [CookieClicker 日本語版](https://natto0wtr.web.fc2.com/CookieClicker/)